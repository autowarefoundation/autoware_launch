autoware_system_design_format: v0.1.0

name: Tier4MapWrapper.node

launch:
  package: tier4_map_launch
  ros2_launch_file: map.launch.xml

# interfaces
inputs: []

outputs:
  - name: vector_map
    message_type: autoware_map_msgs/msg/LaneletMapBin
    qos:
      reliability: reliable
      durability: transient_local
  - name: pointcloud_map
    message_type: sensor_msgs/msg/PointCloud2
    qos:
      reliability: reliable
      durability: transient_local
  - name: get_differential_pointcloud_map
    message_type: autoware_map_msgs/srv/GetDifferentialPointCloudMap
  - name: get_partial_pointcloud_map
    message_type: autoware_map_msgs/srv/GetPartialPointCloudMap

# parameters
parameter_files: []

parameters:
  - name: map_path
    default: $(find-pkg-share autoware_launch)/config/map
  - name: pointcloud_map_file
    default: pointcloud_map.pcd
  - name: lanelet2_map_file
    default: lanelet2_map.osm
  - name: pointcloud_map_path
    default: $(var map_path)/$(var pointcloud_map_file)
  - name: pointcloud_map_metadata_path
    default: $(var map_path)/pointcloud_map_metadata.yaml
  - name: lanelet2_map_path
    default: $(var map_path)/$(var lanelet2_map_file)
  - name: map_projector_info_path
    default: $(var map_path)/map_projector_info.yaml
  - name: use_multithread
    default: false

  - name: pointcloud_map_loader_param_path
    default: $(find-pkg-share autoware_launch)/config/map/pointcloud_map_loader.param.yaml
  - name: lanelet2_map_loader_param_path
    default: $(find-pkg-share autoware_launch)/config/map/lanelet2_map_loader.param.yaml
  - name: map_tf_generator_param_path
    default: $(find-pkg-share autoware_launch)/config/map/map_tf_generator.param.yaml
  - name: map_projection_loader_param_path
    default: $(find-pkg-share autoware_launch)/config/map/map_projection_loader.param.yaml

# processes
processes:
  - name: export
    trigger_conditions:
      - once:
    outcomes:
      - to_output: vector_map
      - to_output: pointcloud_map
